!function(t){function e(r){if(i[r])return i[r].exports;var o=i[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};e.m=t,e.c=i,e.p="",e(0)}([function(t,e){"use strict";Vue.filter("formatMoney",function(t){var e=parseFloat(t);if(isNaN(e))return"¥  0.00";e=Math.round(100*t)/100;var i=e.toString(),r=i.indexOf(".");for(r<0&&(r=i.length,i+=".");i.length<=r+2;)i+="0";return"¥  "+i});var i=new Vue({el:"#app",data:{productId:0,sku_id:0,result:{},userlist:{},ok:!1,client_id:"5c30db50b42ae8c4",showImg:!1,imgSrc:"",isShow:!1,video_title:"",features:[],generalization:"",isVideo:!1,video_cover:"",sku_name:""},computed:{price:function(){return Vue.filter("formatMoney")(this.result.price)}},mounted:function(){this.$nextTick(function(){i.productId=parseInt(i.getUrlParameter("product_id")),i.sku_id=parseInt(i.getUrlParameter("sku_id")),i.productView()})},methods:{productView:function(){var t=this;axios.get(storeStatic.url+"product/product/h5View?product_id="+t.productId).then(function(e){if(200==e.data.http_code){t.result=e.data.data,document.title=t.result.title,t.video_title=t.result.product_extras.video_title,t.features=t.result.product_extras.features,t.generalization=t.result.product_extras.generalization,t.video_cover=t.result.product_extras.video_cover,t.isimgOrVideo();var i=document.getElementById("editor");t.$nextTick(function(){function e(){t.timer=setTimeout(function(){i.clientHeight==r&&i.clientHeight>=1440&&o++,r=i.clientHeight,1==o?(i.clientHeight>=1440?(i.style.height="33.75rem",t.ok=!0):(i.style.height="auto",t.ok=!1),clearTimeout(t.timer)):e()},500)}var r=0,o=0;e()}),NaN!==t.sku_id&&axios.get(storeStatic.url+"sales/activity/skuActivity?sku_id="+t.sku_id).then(function(e){var i=e.data.data.activity;if(200==e.data.http_code&&i.length>0)for(var r=0;r<i.length;r++)1===i[r].type?(t.sku_name="限时抢购",t.result.price=i[r].price):5===i[r].type&&(t.sku_name="秒杀",t.result.price=i[r].price)}).catch(function(t){console.log(t)})}}).catch(function(t){console.log(t)}),axios.get(storeStatic.url+"product/comment/h5CommentList?product_id="+t.productId).then(function(e){200==e.data.http_code&&(t.userlist=e.data.data)}).catch(function(t){console.log(t)})},isimgOrVideo:function(){var t=this;""!==t.result.product_extras.video_url&&null!==t.result.product_extras.video_url&&(t.isVideo=!0,t.videoPlay())},getUrlParameter:function(t){var e,i,r,o=window.location.search.substring(1);if(o)for(e=o.split("&"),i=0;i<e.length;i++)if(r=e[i].split("="),r[0]===t)return r[1]},changeEditorH:function(t){this.$el.querySelector(".editor").style.height="auto",this.ok=!1},videoPlay:function(){var t=this;new YKU.Player("youkuplayer",{styleid:"0",autoplay:!0,client_id:"5c30db50b42ae8c4",vid:t.result.product_extras.video_url,newPlayer:!0})},clickImg:function(t){this.showImg=!0,this.imgSrc=t.currentTarget.src},openApp:function(){if(function(){var t=navigator.userAgent.toLowerCase();return"micromessenger"==t.match(/MicroMessenger/i)||"weibo"==t.match(/WeiBo/i)||"qq"==t.match(/QQ/i)}())this.isShow=!0;else{var t=function(t){var r=Date.now();(!t||r-t<e+200)&&(i=!1)};this.isShow=!1;var e=1e3,i=!0,r={versions:function(){var t=navigator.userAgent;navigator.appVersion;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&-1==t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/)||!!t.match(/AppleWebKit/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:-1==t.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()};if(setTimeout(function(){i||(location.href="http://store.putao.com/toys/putaoleyuan")},2e3),r.versions.android){var o=Date.now(),n=document.createElement("iframe");n.src="ptpark://putaopark",n.style.display="none",document.body.appendChild(n),setTimeout(function(){t(o)},e)}else{var o=Date.now();window.location.href="putaoparkh5://park",setTimeout(function(){t(o)},e)}}},dateFormat:function(t){var e=new Date;e.setTime(1e3*t);var i=e.getFullYear()+"/";return e.getMonth()+1<10&&(i+="0"),i+=e.getMonth()+1+"/",e.getDate()<10&&(i+="0"),i+=e.getDate()+" ",e.getHours()<10&&(i+="0"),i+=e.getHours()+":",e.getMinutes()<10&&(i+="0"),i+=e.getMinutes()}}})}]);