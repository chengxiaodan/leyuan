!function(e){function i(a){if(t[a])return t[a].exports;var n=t[a]={exports:{},id:a,loaded:!1};return e[a].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}var t={};i.m=e,i.c=t,i.p="",i(0)}([function(e,i,t){"use strict";var a=t(1),n=function(e){return e&&e.__esModule?e:{default:e}}(a);n.default.namespace("PT.Index"),PT.Index=function(){this.swiper1=new Swiper("#shoplists",{slidesPerView:"auto"}),this.swiper2=new Swiper("#shoplists-top",{slidesPerView:"auto"}),this.init()},PT.Index.prototype={init:function(){var e=this;1!==parseInt(n.default.getUrlParameter("inapp"))&&($("#goback").hide(),$("#sharebtn").hide(),$(".cxd-recommend").hide(),$("#cxd-footer").show(),$(".cxd-edit").css("padding-bottom","2.4rem"),$(".open-app").click(function(){n.default.openApp()})),$("#goback").on("click",function(){pt_jssdk.openNativeView({type:"goback",title:"",id:0})});var i=n.default.getUrlParameter("id");e.getlist(i)},bindEvent:function(){var e=this;e.swiper1.on("click",function(e){var i=$(e.clickedSlide).find("a").data("id"),t=$(e.clickedSlide).find("a").data("parkid"),a=$(e.clickedSlide).find("a figcaption").val();1==parseInt(n.default.getUrlParameter("inapp"))?pt_jssdk.openNativeView({type:"product",title:a,id:i,parkid:t}):window.location.href="wx_product.html?product_id="+i}),e.swiper2.on("click",function(e){var i=$(e.clickedSlide).find("a").data("id"),t=$(e.clickedSlide).find("a").data("parkid"),a=$(e.clickedSlide).find("a").data("title");1==parseInt(n.default.getUrlParameter("inapp"))?pt_jssdk.openNativeView({type:"product",title:a,id:i,parkid:t}):window.location.href="wx_product.html?product_id="+i}),$(window).scroll(function(i){$(window).scrollTop()<$(".cxd-header-center").height()+$(".cxd-header-center").position().top?($(".goback").removeClass("goback2").addClass("goback1"),$("#sharebtn").removeClass("sharebtn2").addClass("sharebtn1"),$(".cxd-header-top").css("visibility","hidden")):($(".goback").removeClass("goback1").addClass("goback2"),$("#sharebtn").removeClass("sharebtn1").addClass("sharebtn2"),$(".cxd-header-top").css("visibility","visible")),$(".cxd-header-top .swiper-slide").length<=3?(e.swiper2.lockSwipes(),e.swiper2.params.centeredSlides=!0,$(".cxd-header-top .swiper-wrapper").css("right",.44*$(".cxd-header-top .swiper-slide").length+"rem")):(e.swiper2.unlockSwipes(),e.swiper2.params.centeredSlides=!1,$(".cxd-header-top .swiper-wrapper").css("right","0rem")),e.swiper2.onResize(),i.preventDefault()}),$("body").on("touchmove",function(){$(".cxd-header-top").css("top","0px")}),$("body").on("touchstart",function(){$(".cxd-header-top").css("top","0px")}),$("body").on("touchend",function(){$(".cxd-header-top").css("top","0px")})},getlist:function(e){var i=this;$.ajax({url:parkStatic.url+"topic/detail?tid="+e,type:"get",dataType:"json",cache:!1,async:!0,success:function(e){200==e.code?0!==e.data.length&&i.render(e.data):alert(e.message)},error:function(e){}})},render:function(e){var i=this;if(e.relation.length>0?(1==e.relation.length?(i.swiper1.params.centeredSlides=!0,i.swiper1.lockSwipes(),$(".cxd-header-center .swiper-wrapper").css("right",.15*$(".cxd-header-center .swiper-slide").length+"rem")):2==e.relation.length?(i.swiper1.params.centeredSlides=!0,i.swiper1.lockSwipes(),$(".cxd-header-center .swiper-wrapper").css("right","15%")):e.relation.length<=3?(i.swiper2.lockSwipes(),i.swiper2.params.centeredSlides=!0):(i.swiper1.unlockSwipes(),i.swiper2.unlockSwipes(),$(".cxd-header-center .swiper-wrapper").css("right","0px"),i.swiper1.params.centeredSlides=!1,i.swiper2.params.centeredSlides=!1),i.swiper1.update(),i.swiper2.onResize(),$("title").text(e.name),$("#banner-icon").attr("src",e.banner),$(".cxd-edit").append(e.content),$.each(e.relation,function(e,t){i.swiper1.appendSlide('<div class="swiper-slide"><a data-id="'+t.code+'" data-parkid="'+t.id+'"><figure><img src="'+t.image+'" /><figcaption>'+t.title+"</figcaption></figure></a></div>"),i.swiper2.appendSlide('<div class="swiper-slide"><a data-id="'+t.code+'" data-parkid="'+t.id+'" data-title="'+t.title+'"><figure><img src="'+t.image+'" /></figure></a></div>')})):($(".cxd-header-top").hide(),$(".cxd-header-center").hide()),e.recommend.length>0){var t=$(".cxd-recommend ul");$.each(e.recommend,function(e,i){$('<li data-id="'+i.code+'" data-parkid="'+i.id+'"><figure><img src="'+i.image+'"><figcaption>'+i.title+'</figcaption><div class="rice"><span class="danwei">&yen;&nbsp;</span><span class="rice-value">'+i.start_price+"</span></div></figure></li>").appendTo(t)});for(var a=t.find("li"),n=0;n<a.length;n++)!function(e){a[e].addEventListener("click",function(i){pt_jssdk.openNativeView({type:"product",title:$(a[e]).find("figcaption").text(),id:$(a[e]).data("id"),parkid:$(a[e]).data("parkid")})},!1)}(n);2==e.recommend.length?($(a[a.length-1]).addClass("remove-back"),$(a[a.length-2]).addClass("remove-back")):e.recommend.length>0&&e.recommend.length/2%2==0?($(a[a.length-1]).addClass("remove-back"),$(a[a.length-2]).addClass("remove-back")):e.recommend.length>0&&e.recommend.length/2%2!=0&&$(a[a.length-1]).addClass("remove-back")}else $(".cxd-recommend").hide();i.bindEvent(),$("#sharebtn").unbind("click"),$("#sharebtn").bind("click",function(){pt_jssdk.nativeShare({title:encodeURI(e.name),pic:encodeURI(e.banner),desc:encodeURI(e.subtitle),url:encodeURI(window.location.href.replace("inapp=1","")+"")})}),$(".loading").remove(),$("#main").css("visibility","visible")}},$(document).ready(function(){new PT.Index})},function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var t={namespace:function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];var a,n,r,d,o,s,c,p,l;for(a=i,p=a.length,s=0;s<p;s++)for(o=a[s].split("."),d=window[o[0]]=window[o[0]]||{},r=o.slice(1),l=r.length,c=0;c<l;c++)n=r[c],d=d[n]=d[n]||{}},getUrlParameter:function(e){var i,t,a,n=window.location.search.substring(1);if(n)for(i=n.split("&"),t=0;t<i.length;t++)if(a=i[t].split("="),a[0]===e)return a[1]},isphone:function(e){return/^1[0-9]{10}$/.test(e)},openApp:function(){if(function(){var e=navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)||"weibo"==e.match(/WeiBo/i)||"qq"==e.match(/QQ/i)}())$(".openBrowser").show();else{var e=function(e){var a=Date.now();(!e||a-e<i+200)&&(t=!1)};$(".openBrowser").hide();var i=1e3,t=!0,a={versions:function(){var e=navigator.userAgent;navigator.appVersion;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/)||!!e.match(/AppleWebKit/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1||e.indexOf("Mac")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()};if(setTimeout(function(){t||(location.href="http://store.putao.com/toys/putaoleyuan")},2e3),a.versions.android){var n=Date.now(),r=document.createElement("iframe");r.src="ptpark://putaopark",r.style.display="none",document.body.appendChild(r),setTimeout(function(){e(n)},i)}else{var n=Date.now();window.location.href="putaoparkh5://park",setTimeout(function(){e(n)},i)}}}};i.default=t}]);