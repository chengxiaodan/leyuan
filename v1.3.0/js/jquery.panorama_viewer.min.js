!function(n){function e(n){var e=n.changedTouches,i=e[0],t="";switch(n.type){case"touchstart":t="mousedown";break;case"touchmove":t="mousemove";break;case"touchend":t="mouseup";break;default:return}var a=document.createEvent("MouseEvent"),o=2;navigator.userAgent.match(/Android/i)&&(o=10),a.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX*o,i.clientY*o,!1,!1,!1,!1,0,null),i.target.dispatchEvent(a)}var i={repeat:!1,direction:"horizontal",animationTime:700,easing:"ease-out",overlay:!0};n.fn.panorama_viewer=function(t){return document.addEventListener("touchstart",e,!0),document.addEventListener("touchmove",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("touchcancel",e,!0),this.each(function(){var e=n.extend({},i,t),a=n(this);a.find("> img").load(function(){function i(i){var t={x:!1,y:!1},a={x:m.x-(u.x-i.clientX),y:m.y-(u.y-i.clientY)};return"horizontal"==e.direction?(1==e.repeat?t.x=!0:t.x=a.x<0&&-1*a.x<d.w,v&&t.x&&(m.x=a.x,m.y=0)):(1==e.repeat?t.y=!0:t.y=a.y<0&&-1*a.y<d.h,v&&t.y&&(m.y=a.y,m.x=0)),n(this).css("background-position",m.x+h+"px "+m.y+p+"px"),u.x=i.clientX,u.y=i.clientY,i.stopPropagation(),!1}function t(e){return v=!1,s.unbind("mousemove",i),"mousedown"==e.type?(u.x=e.clientX,u.y=e.clientY,v=!0,s.bind("mousemove",i)):n(document.body).focus(),e.stopPropagation(),!1}function o(){m={x:0,y:0},n(this).css("backgroundPosition","0 0")}a.find("> img").addClass("pv-pano"),a.addClass("pv-container").wrapInner("<div class='pv-inner pv-animating'></div>"),"vertical"==e.direction&&a.addClass("pv-vertical"),a.find(".pv-animating").css({"-webkit-transition":"all "+e.animationTime+"ms "+e.easing,"-moz-transition":"all "+e.animationTime+"ms "+e.easing,"-ms-transition":"all "+e.animationTime+"ms "+e.easing,transition:"all "+e.animationTime+"ms "+e.easing}),imgSrc=a.find(".pv-pano").attr("src"),width=a.find(".pv-pano").width(),height=a.find(".pv-pano").height();var r="no-repeat";1==e.repeat&&(r="repeat"),a.find(".pv-inner").css({height:height,width:width,background:"url("+imgSrc+") "+r,"background-size":"cover"});var s=a.find(".pv-inner"),c={w:parseInt(s.parent().width()),h:parseInt(s.parent().height())},d={w:width-c.w,h:height-c.h},u={x:0,y:0},m={x:0,y:0},h=0,p=0,v=!1;s.bind("mousedown mouseup mouseleave",t),s.bind("dblclick",o),a.find(".pv-pano").hide()})})}}(window.jQuery);